# Implementation Plan

- [ ] 1. Team モデルとマイグレーションを追加する
  - チーム名や国、設立年、作成日時・更新日時などの属性を持つ Team モデルを Prisma スキーマに追加し、マイグレーションを作成・適用して DB にテーブルを反映する。
  - 既存 Player モデルとの衝突がないことを確認し、将来的な関連付けに備えた拡張しやすい構造にしておく。
  - _Requirements: 1, 2, 3, 4, 5_

- [ ] 2. /teams ページの骨組みを追加する
  - players ページと同様のレイアウト構造で /teams ルートを作成し、チーム一覧と新規作成フォームを配置するためのコンテナを用意する。
  - 初期状態ではダミーデータまたは空のプレースホルダを用いてレンダリングを確認する。
  - _Requirements: 2, 3_

- [ ] 3. 一覧表示用の TeamTable コンポーネントを実装する
  - Team の配列を受け取り、ID・チーム名などを行として表示するテーブル UI を作成する。
  - 編集・削除ボタンを各行に配置し、インライン編集モードへの切り替えや削除アクションのトリガを実装する。
  - チームが存在しない場合のプレースホルダ表示を用意し、状態に応じたメッセージを表示する。
  - _Requirements: 2, 3, 4_

- [ ] 3.1 (P) TeamTable の編集・削除ハンドリングを実装する
  - 編集モード用の入力フィールドとフォーム送信処理を実装し、更新後にローカル状態へ反映するロジックを組み立てる。
  - 削除ボタン押下時に対象行を削除しつつ、処理中インジケータや二重送信防止などの基本的な UX を整える。
  - _Requirements: 3, 4, 5_

- [ ] 4. 新規作成用の CreateTeamForm コンポーネントを実装する
  - チーム名を必須入力とし、国や設立年など任意項目の入力フィールドを用意したフォームを作成する。
  - 送信時にサーバ側のチーム作成ロジックを呼び出し、成功時にはフォームをリセットし一覧を再取得できるようにする。
  - 必須項目未入力や明らかに不正な値についてはクライアント側でも簡易チェックを行う。
  - _Requirements: 1, 5_

- [ ] 5. TeamActions サーバアクションを実装する
  - createTeam / updateTeam / deleteTeam の 3 つの処理をまとめ、入力 DTO に対するバリデーションと Prisma を用いた CRUD をカプセル化する。
  - バリデーションでは必須項目の有無や数値範囲などをチェックし、違反時には分かりやすいメッセージを含むエラーを返す。
  - 成功時には /teams パスの再検証を行い、UI が常に最新の Team 一覧を表示できるようにする。
  - _Requirements: 1, 3, 4, 5_

- [ ] 6. Teams API ルートを実装する
  - /api/teams の GET/POST で一覧取得・新規作成を提供し、take/skip などのクエリに対応しつつ件数制限やエラーレスポンスを定義する。
  - /api/teams/:id の GET/PUT/DELETE で単体取得・部分更新・削除を提供し、無効な ID や存在しないレコードに対する 400/404 応答を整備する。
  - players API と一貫したレスポンス形式（data, total, success など）とステータスコードを採用する。
  - _Requirements: 1, 2, 3, 4, 5_

- [ ] 7. /teams ページと TeamActions / TeamsApi の統合を行う
  - TeamsPage から Prisma を用いて初期 Team 一覧を取得し、TeamTable に渡すフローを実装する。
  - TeamTable / CreateTeamForm が TeamActions を通して Team データを更新し、その結果がページに反映されることを確認する。
  - 入力エラーやサーバエラー時に、UI 上でユーザーが状況を理解できるメッセージを表示する。
  - _Requirements: 1, 2, 3, 4, 5_

- [ ]* 8. Team CRUD のテストを追加する
  - TeamActions のバリデーションと CRUD ロジックについて、正常系と代表的な異常系をカバーするユニットテストを作成する。
  - /api/teams および /api/teams/:id に対する主なリクエストパターン（成功・検証エラー・404 など）を確認する統合テストを追加する。
  - /teams ページでの新規作成・編集・削除の基本フローを確認する E2E または UI テストを検討し、最低限のシナリオを実装する。
  - _Requirements: 1, 2, 3, 4, 5_
